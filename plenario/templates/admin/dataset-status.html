{% extends 'base.html' %}
{% block title %}Dataset status - Plenar.io{% endblock %}
{% block extra_styles %}
    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.2/css/jquery.dataTables.css">
{% endblock %}
{% block content %}
    <h1>
        Dataset update status
        <small><a href='/admin/view-datasets'>View dataset meta &raquo;</a></small>
    </h1>

    <table id='datasets-pending-table' class="table table-condensed">
        <thead>
            <th>Name</th>
            <th>Status</th>
            <th>Completed</th>
            <th>Traceback</th>
        </thead>
        <tbody>
            {% for result in results %}
                <tr>
                    <td>{{ result.human_name }}</td>
                    <td>
                        {% if result.status %}
                            <span class="label
                                {% if result.status == 'SUCCESS' %}
                                    label-success
                                {% else %}
                                    label-primary
                                {% endif %}">
                                {{ result.status|title }}
                            </span>
                        {% endif %}
                    </td>
                    <td>
                        {{ result.date_done }}
                    </td>
                    <td>
                        {% if result.traceback %}
                            <code>{{ result.traceback|safe }}</code>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

{% endblock content %}
